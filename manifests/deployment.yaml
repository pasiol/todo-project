apiVersion: apps/v1
kind: Deployment
metadata:
  name: todo-project
spec:
  replicas: 1
  selector:
    matchLabels:
      app: todo-project
  template:
    metadata:
      labels:
        app: todo-project
    spec:
      volumes:
        - name: static-files
          persistentVolumeClaim:
            claimName: todo-project-claim
      containers:
      - name: backend
        image: pasiol/todo-project-backend@sha256:d5a41e97ddca28e15603f9413fae6e0f53e3d88213cd8401fb0fd68fdaa1dbee
        env:
          - name: APP_PORT
            value: "8888"
          - name: ALLOWED_ORIGINS
            value: todo-project:3000
      - name: todo-project
        image: pasiol/todo-project@sha256:e16129f221b6e047395f6654e3d3ba138323f81b53a228397cf5342ed8b74f70
        volumeMounts:
          - mountPath: /var/app/build/static/pv
            name: static-files
        env:
          - name: APP_PORT
            value: "3000"
